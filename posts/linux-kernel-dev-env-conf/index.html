<!DOCTYPE html>
<html lang="ko-kr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>&gt; /tmp</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://jiwonaid.github.io/hugo-theme-console/css/terminal-0.7.1.min.css">
    <link rel="stylesheet" href="https://jiwonaid.github.io/hugo-theme-console/css/animate-3.7.2.min.css">
    <link rel="stylesheet" href="https://jiwonaid.github.io/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <meta property="og:title" content="Linux Kernel Dev Env Configuration" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jiwonaid.github.io/posts/linux-kernel-dev-env-conf/" /><meta property="article:published_time" content="2021-09-02T22:07:46+09:00" />



<meta name="twitter:title" content="Linux Kernel Dev Env Configuration"/>
<meta name="twitter:description" content="Host sudo apt install snapd # https://multipass.run/docs/installing-on-linux sudo snap install multipass # https://multipass.run/docs/using-libvirt sudo apt install libvirt-daemon-system sudo snap connect multipass:libvirt sudo multipass stop --all sudo multipass set local.driver=libvirt # https://multipass.run/docs/launch-command sudo multipass launch -c 12 -d 128G -m 32G -n mp # Check libvirt virsh console mp Guest vi /etc/default/grub GRUB_DEFAULT=3 GRUB_TIMEOUT_STYLE=menu GRUB_TIMEOUT=3 update-grub2 # https://kernelnewbies.org/KernelBuild apt-get install libncurses5-dev gcc make git exuberant-ctags bc libssl-dev flex bison libelf-dev git clone https://kernel."/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav" onclick="focusTerminal()">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://jiwonaid.github.io/" class="no-style ">&gt; /tmp</a>:/<spam id="path"><a href='https://jiwonaid.github.io/posts'>posts</a>/<a href='https://jiwonaid.github.io/posts/linux-kernel-dev-env-conf'>linux-kernel-dev-env-conf</a>/</spam>$
              <input id="input" autofocus style="color: transparent; text-shadow: 0 0 0 black;"></div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
            </ul>
          </nav>
        </div>
        <p id="output">Supported commands: ls, cd ${PATH}</p>
    </div>

    <div class="container " >
        
<h1>Linux Kernel Dev Env Configuration</h1>

Sep. 2, 2021


<br/><br/>
<h2 id="host">Host</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt install snapd

<span style="color:#75715e"># https://multipass.run/docs/installing-on-linux</span>
sudo snap install multipass

<span style="color:#75715e"># https://multipass.run/docs/using-libvirt</span>
sudo apt install libvirt-daemon-system

sudo snap connect multipass:libvirt

sudo multipass stop --all

sudo multipass set local.driver<span style="color:#f92672">=</span>libvirt

<span style="color:#75715e"># https://multipass.run/docs/launch-command</span>
sudo multipass launch -c <span style="color:#ae81ff">12</span> -d 128G -m 32G -n mp

<span style="color:#75715e"># Check libvirt</span>
virsh console mp
</code></pre></div><h2 id="guest">Guest</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vi /etc/default/grub

GRUB_DEFAULT<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>
GRUB_TIMEOUT_STYLE<span style="color:#f92672">=</span>menu
GRUB_TIMEOUT<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>

update-grub2
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># https://kernelnewbies.org/KernelBuild</span>

apt-get install libncurses5-dev gcc make git exuberant-ctags bc libssl-dev flex bison libelf-dev

git clone https://kernel.googlesource.com/pub/scm/linux/kernel/git/netdev/net-next.git

cd net-next

cp /boot/config-<span style="color:#e6db74">`</span>uname -r<span style="color:#e6db74">`</span>* .config
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">make menuconfig

<span style="color:#75715e"># TUI(text-based user interfaces)</span>
- Networking support
    Networking options: enable all

- Kernel hacking
    printk and dmesg options: enable all
    Memory Debugging: enable KASAN
    Lock Debugging: enable Lock debugging, disable torture tests <span style="color:#66d9ef">for</span> locking
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">make -j<span style="color:#66d9ef">$(</span>nproc<span style="color:#66d9ef">)</span>

make modules

make modules_install install

update-grub2

reboot
</code></pre></div><h2 id="net">net/</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
<span style="color:#75715e"># Do patch</span>
<span style="color:#75715e"># vi ${FILE}</span>

./scripts/checkpatch.pl <span style="color:#e6db74">${</span>FILE<span style="color:#e6db74">}</span>

<span style="color:#75715e"># git commit</span>
ipv6: change <span style="color:#66d9ef">return</span> type from int to void <span style="color:#66d9ef">for</span> mld_process_v2

The mld_process_v2 only returned 0.

So, the <span style="color:#66d9ef">return</span> type is changed to void.

Signed-off-by: First Last &lt;<span style="color:#e6db74">${</span>EMAIL<span style="color:#e6db74">}</span>@gmail.com&gt;

<span style="color:#75715e"># git format-patch</span>
git format-patch -o patches/ --subject-prefix<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;PATCH net-next&#34;</span> <span style="color:#e6db74">${</span>SHA<span style="color:#e6db74">}</span>^

<span style="color:#75715e"># Check patch</span>
./scripts/checkpatch.pl patches/<span style="color:#e6db74">${</span>PATCH<span style="color:#e6db74">}</span>

<span style="color:#75715e"># git config</span>
git config --global sendemail.smtpuser <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>EMAIL<span style="color:#e6db74">}</span><span style="color:#e6db74">@gmail.com&#34;</span>
git config --global sendemail.smtpserver smtp.gmail.com
git config --global sendemail.smtpserverport <span style="color:#ae81ff">465</span>
git config --global sendemail.smtpencryption ssl

./scripts/get_maintainer.pl patches/<span style="color:#e6db74">${</span>PATCH<span style="color:#e6db74">}</span>

git send-email --from<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> --to<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> --cc<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> patches/<span style="color:#e6db74">${</span>PATCH<span style="color:#e6db74">}</span>
</code></pre></div><h2 id="results">Results</h2>
<p><a href="https://patchwork.kernel.org/project/netdevbpf/patch/20210901153449.26067-1-jiwonaid0@gmail.com/">https://patchwork.kernel.org/project/netdevbpf/patch/20210901153449.26067-1-jiwonaid0@gmail.com/</a></p>
<p><a href="https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=3f22bb137eb03ab27eaaa8b40d3e072eb541444e">https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=3f22bb137eb03ab27eaaa8b40d3e072eb541444e</a></p>



        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo</a>.
</div>

    </div>
  </body>
  <script>
    var input = document.getElementById("input");
    input.style.width = "1ch";

    input.blur();
    function focusTerminal() {
      input.focus();
    }

    input.addEventListener('input', function () {
      input.style.width = input.value.length + 1 + "ch";
    });

    input.addEventListener('keydown', function () {
      if (event.key == 'Enter') {
        if (input.value == "ls") {
          var path = document.getElementById("path");
          var output = document.getElementById("output");
          var text = ".\n..\n";

          if ( path.innerText == "") {
            text += "about\nposts";
          }
          else if (path.innerText == "posts/") {
            text += "";
            text = text.replace(/\/posts\//g, "");
            text = text.replace(/\//g, "\n");
          }

          input.value = "";
          input.style.width = "1ch";
          output.innerText = text;
        }
        else if (input.value.substr(0, 3) == "cd ") {
          var text = input.value;
          text = text.replace("cd ", "");
          window.location.href = text;
        }
      }
    });
  </script>
</html>
